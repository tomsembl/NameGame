<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
        <title>The Name Game</title>
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}">
    </head>
    <body class="flex-v-start"> 
        <h1 class="heading subheading">JOIN GAME</h1>
        <div class="flex-v form pad-10pct">
            <div class="flex-v-start"> 
                <h1 class="heading subheading2">SELECT A GAME</h1>
                <div class="text-box" id="games">
                {% for id, name in games %}
                    <div class="option" onclick="option_select(this)" id="option{{id}}">
                        <input type="hidden" value="{{id}}">
                        {{name}}
                    </div>
                {% endfor %}
                </div>
            </div>
        </div>
        <div class="flex-h mar-1em">
            <button class="button1" onclick="submit('join_game')">Join Game</button>
            <button class="button1" onclick="submit('delete_game')">Delete Game</button>
        </div>
        <div class="flex-h mar-1em">
            <button class="button1" onclick="location.href='join_game';">Refresh</button>
            <button class="button1" onclick="location.href='/';">Home</button>
        </div>
    </body>
    <script>
        var selected_option = ''
        function option_select(elem){
            if(selected_option){selected_option.classList.remove("selected")}
            selected_option = document.getElementById(elem.id)
            selected_option.classList.add("selected")
        }
            
        function submit(join_or_submit){
            game_id = ''
            options = document.getElementById("games").children
            for(var x of options){if (x.classList.contains('selected')){game_id = x.children[0].value}}
            if (game_id === ''){alert("select one")}
            else { location.href=`${join_or_submit}/${game_id}`; }
        }
    </script>
</html>
        